import{r as s,W as R,j as e,Y as I,a as j}from"./app--oISFhqW.js";import{A as S}from"./AuthenticatedLayout-DSVi8vY8.js";import{s as c}from"./socket-DpHjYu21.js";import k from"./SendUserInformation-P3OOCMnW.js";import{F as L}from"./MagnifyingGlassIcon-8S3t9k7g.js";import{F}from"./UserIcon-BTpebpEf.js";import"./Modal-CkYoBzAA.js";import"./transition-D3AYu_rU.js";import"./SecondaryButton-CeOpsOwd.js";function U({title:a,titleId:t,...l},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},l),a?s.createElement("title",{id:t},a):null,s.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"}))}const D=s.forwardRef(U);function $({title:a,titleId:t,...l},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},l),a?s.createElement("title",{id:t},a):null,s.createElement("path",{fillRule:"evenodd",d:"M4.5 7.5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9Z",clipRule:"evenodd"}))}const A=s.forwardRef($);function z({auth:a,interview:t}){const[l,n]=s.useState([]),[d,x]=s.useState(!1),[m,h]=s.useState(0),[u,b]=s.useState(t.is_expired),[p,v]=s.useState(""),{post:f,data:M}=R({interview_id:t.id}),w=()=>{c.emit("activateInterview"),f(route("tests.activateInterview"))},y=()=>{c.emit("interviewExpired"),f(route("tests.expireInterview"))};s.useEffect(()=>(c.on("updateUsers",r=>{n(r)}),()=>{c.off("updateUsers")}),[]),s.useEffect(()=>{if(d){const r=Date.now()+m*1e3,i=setInterval(()=>{const o=Math.max(0,Math.floor((r-Date.now())/1e3));h(o),o===0&&(clearInterval(i),b(!0),x(!1))},1e3);return()=>clearInterval(i)}},[d,m]);const N=()=>{w(),x(!0),h(T(t.time))},E=()=>{y(),x(!1)},g=l.filter(r=>r.name.toLowerCase().includes(p.toLowerCase())||r.registration_number.toLowerCase().includes(p.toLowerCase())),T=r=>{const[i,o,C]=r.split(":").map(Number);return i*3600+o*60+C};return e.jsxs(S,{user:a.user,children:[e.jsx(I,{title:"Current-test"}),e.jsx(j,{href:route("tests.index"),className:"inline-flex items-center justify-center rounded-full bg-purple-950 py-2 px-5 text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-10",children:"Retour"}),e.jsx("div",{className:"m-5 bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-7xl mx-auto w-full grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"h-250 bg-white shadow-lg rounded-lg p-6",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-6 bg-purple-950 p-3 rounded-md text-center text-white",children:["Test: ",t.name]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 text-black mb-6",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Classe:"})," ",t.post.name]}),e.jsx("p",{className:"text-graydark text-md",children:t.post.description})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Subjet:"})," ",t.subject.subject]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Durée:"})," ",t.time]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",u?e.jsx("span",{className:"text-red-800",children:"Terminé"}):e.jsx("span",{className:"text-blue-800",children:"En attente ..."})]})]})]}),u?e.jsx(j,{href:`/students-answers/${t.id}`,className:" text-md rounded-md border-purple-950 border  text-purple-950 py-1 px-2 text-center font-medium bg-white hover:bg-opacity-90 lg:px-8 xl:px-10",children:"Consulter les résulats"}):e.jsxs("div",{className:"mb-6 text-center",children:[e.jsxs("p",{className:"text-2xl mb-4",children:[e.jsx("strong",{children:"Temps écoulé:"})," ",new Date(m*1e3).toISOString().substr(11,8)]}),e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("button",{onClick:N,className:"bg-green-500 text-white px-6 py-3 rounded-full flex items-center justify-center space-x-2 transition duration-300 hover:bg-green-600",children:[e.jsx(D,{className:"h-6 w-6"}),e.jsxs("span",{children:[" ",d?"Test en cours":"Démarrer le test"]})]}),e.jsxs("button",{onClick:E,className:`ms-2 px-6 py-3 rounded-full flex items-center justify-center space-x-2 transition duration-300 ${u?"bg-red-500":"bg-yellow-500"} text-white hover:opacity-90`,disabled:t.isExpired,children:[e.jsx(A,{className:"h-6 w-6"}),e.jsx("span",{children:t.isExpired?"Test déjat expiré":"Expirer le Test"})]})]})]})]}),e.jsxs("div",{className:"p-5 h-250 shadow-sm border-t border rounded-lg bg-white",children:[e.jsxs("h3",{className:"text-lg text-black font-semibold mb-2 relative",children:["Utilisateurs Connectés",e.jsx("span",{className:"absolute top-0 right-0 transform translate-x-2 -translate-y-2 inline-block text-xs bg-red-800 text-white rounded-full px-2 py-0.5",children:g.length})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Rechercher un utilisateur...",value:p,onChange:r=>v(r.target.value),className:"py-2 px-4 pr-10 border border-purple-950 text-black rounded-full bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-gray-50 text-sm"}),e.jsx(L,{className:"absolute right-3 top-2 h-5 w-5 text-gray-400"})]})}),e.jsx("div",{className:"overflow-y-auto max-h-80",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:g.map(r=>e.jsxs("li",{className:"py-4 flex items-center justify-between hover:bg-gray-100 px-3 rounded-lg transition duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsx(F,{className:"h-8 w-8 text-gray-600"}),e.jsx("span",{className:"absolute bottom-0 right-0 h-3 w-3 bg-green-500 rounded-full border-2 border-white"})]}),e.jsx("div",{className:"text-sm font-medium text-black",children:r.name})]}),e.jsx("div",{className:"text-sm text-gray-500 bg-gray-200 px-3 py-1 rounded-full",children:r.registration_number})]},r.id))})})]})]})}),e.jsx(k,{})]})}export{z as default};
