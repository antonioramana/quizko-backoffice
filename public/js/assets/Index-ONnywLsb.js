import{r as a,W as R,j as e,Y as q,a as L}from"./app--oISFhqW.js";import{A as K,a as T}from"./AuthenticatedLayout-DSVi8vY8.js";import{D as P}from"./Datagrid-C_u-I_yz.js";import{M as x}from"./Modal-CkYoBzAA.js";import z from"./Form-D9JLLThx.js";import{D as B}from"./DeletionConfirmation-Ci_NAwrw.js";import{P as G}from"./PrimaryButton-D_GEZHxU.js";import{C as I}from"./Chip-BpkI-or4.js";import{g as Q}from"./generateUniqueColor-Cj-zfR5N.js";import U from"./Edit-DSgQviaT.js";import{F as W,a as Y}from"./PhoneIcon-qFTNZ_-A.js";import{F as H,a as J}from"./TrashIcon-oV8PbAGc.js";import{q as O}from"./transition-D3AYu_rU.js";import"./SecondaryButton-CeOpsOwd.js";import"./ChevronRightIcon-mwYJnyBs.js";import"./MagnifyingGlassIcon-8S3t9k7g.js";import"./TextInput-DT_McUro.js";import"./InputLabel-Cb622Tc0.js";import"./Select-BCFvR9KI.js";function we({auth:l,candidates:t,posts:o}){const[i,n]=a.useState(!1),[C,d]=a.useState(!1),[f,c]=a.useState(!1),[v,b]=a.useState(!1),[r,m]=a.useState(null),[p,y]=a.useState(""),[u,j]=a.useState(""),{data:S,setData:F,post:M,put:Z,delete:k,processing:V,errors:_,reset:w,cancel:g,hasErrors:h,recentlySuccessful:N}=R({name:"",registration_number:"",email:"",phone:"",address:"",gender:"masculine",post_id:"",role:"candidate",password:"",password_confirmation:""}),D=t.filter(s=>(s.user.name.toLowerCase().includes(p.toLowerCase())||s.registration_number.toLowerCase().includes(p.toLowerCase()))&&(!u||s.post.name===u)),E=X({onDelete:s=>{m(s),d(!0)},onEdit:s=>{m(s),c(!0)},onShow:s=>{m(s),b(!0)}});a.useEffect(()=>{h&&w("name"),N&&(w(),i&&n(!1),f&&c(!1))},[h,N]);const A=s=>{s.preventDefault(),M(route("students.store"))},$=s=>{s.preventDefault(),k(route("students.destroy",r)),m(null),d(!1)};return console.log(t),e.jsxs(K,{user:l.user,children:[e.jsx(q,{title:"Étudiant"}),e.jsxs("div",{className:"bg-white py-1",children:[e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-black",children:[e.jsx("label",{className:"font-semibold",children:"Filtrer par :"}),e.jsx("input",{type:"text",placeholder:"nom ou matricule",value:p,onChange:s=>y(s.target.value),className:"p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:`text-md text-purple-950 px-2 py-1 rounded-md cursor-pointer ${u===""?"border-2 border-white bg-purple-950 text-white":"border-2 border-transparent"} hover:border-purple-500`,onClick:()=>j(""),children:"Tous"}),o.length>0&&o.map(s=>e.jsx("div",{className:`text-md text-purple-950 px-2 py-1 rounded-md cursor-pointer ${u===s.name?"border-2 border-white bg-purple-950 text-white":"border-2 border-transparent"} hover:border-purple-500`,onClick:()=>j(s.name),children:s.name},s.id))]}),e.jsx(G,{onClick:()=>n(!0),children:"Ajouter un étudiant"})]}),e.jsx(P,{columns:E,rows:D,canCreate:!1,onCreate:()=>n(!0)})]}),e.jsxs(x,{show:i,title:"Ajouter un étudiant",onClose:()=>{n(!1)},children:[e.jsx(O,{show:h,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-center text-red-600 dark:text-red-400",children:"Quelque chose s'est mal passé."})}),e.jsx(z,{mode:"creation",data:S,setData:F,errors:_,processing:V,onSubmit:A,onCancel:()=>{g(),n(!1)}})]}),e.jsx(x,{show:f,title:"Modifier un étudiant",onClose:()=>c(!1),children:e.jsx(U,{posts:o,onCancel:()=>c(!1),candidate:r})}),e.jsx(x,{show:C,title:"Supprimer un étudiant",onClose:()=>d(!1),children:e.jsx(B,{name:r==null?void 0:r.user.name,onCancel:()=>{g(),d(!1)},handleDeleteSubmit:$})}),e.jsx(x,{show:v,title:"Note de l'étudiant",onClose:()=>b(!1),children:e.jsx("div",{className:"max-h-30 overflow-y-auto",children:(r==null?void 0:r.candidate_notes.length)>0?r==null?void 0:r.candidate_notes.map(s=>e.jsxs("div",{className:"flex items-center bg-white text-black rounded-md shadow-xs my-2 p-2",children:[e.jsx("div",{className:"w-1/3 text-lg font-semibold text-gray-500",children:s.interview.name}),e.jsx("div",{className:"w-1/3 flex justify-center",children:e.jsxs("span",{className:`rounded-full py-2 px-4 text-white font-semibold text-center 
                                                            ${s.note!==null?"bg-red-600":"bg-green-600"} 
                                                            transition-colors duration-300 ease-in-out`,children:[s.note!==null?"Note: ":"Note provisoire: ","  ",s.note!==null?s.note:s.interim_note]})}),e.jsx("div",{className:"w-1/3 flex justify-end",children:e.jsx(L,{href:route("student_answers.studentTestAnswers",[r==null?void 0:r.id,s.interview.id]),className:"bg-purple-950 py-2 px-5 text-sm font-medium text-white rounded-full hover:bg-purple-850 transition-all",children:"Visualiser les résultats"})})]},s.id)):e.jsx("div",{className:"bg-red-800 text-white rounded-md my-2 p-3",children:"Aucune note disponible"})})})]})]})}const X=l=>a.useMemo(()=>[{accessorKey:"registration_number",cell:t=>e.jsx("span",{className:"bg-gray p-2 rounded-md text-black",children:t.getValue()}),header:()=>"Matricule"},{accessorFn:t=>t.user,id:"last_name",cell:t=>{const{email:o,phone:i,name:n}=t.getValue();return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{size:"lg",src:"",alt:n}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-[16px] font-semibold",children:n}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1 text-xs font-thin italic",children:[e.jsx(W,{className:"w-3 h-3"}),o]}),i&&e.jsxs("span",{className:"flex items-center gap-1 text-xs font-thin italic",children:[e.jsx(Y,{className:"w-3 h-3"}),i]})]})]})]})},header:()=>"Candidat"},{accessorKey:"gender",cell:t=>e.jsx(I,{type:t.getValue()==="feminine"?"success":"error",children:t.getValue()==="feminine"?"Féminin":"Masculin"}),header:()=>"Genre"},{accessorKey:"post.name",cell:t=>{const o=Q(t.getValue());return e.jsx("span",{className:"text-white rounded-md text-xs p-2",style:{backgroundColor:o},children:t.getValue()})},header:()=>"Classe"},{accessorFn:t=>t,id:"id",cell:t=>e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{className:"p-1 border border-transparent rounded-md",onClick:()=>{l.onShow(t.getValue())},children:e.jsx("span",{className:"w-6 h-4 text-purple-700 p-1 rounded-md border-3 border-white",children:"Voir les notes"})}),e.jsx("button",{className:"p-1 border border-transparent rounded-md",onClick:()=>{l.onEdit(t.getValue())},children:e.jsx(H,{className:"w-6 h-4 text-purple-950 border-3 border-white"})}),e.jsx("button",{className:"p-1 border border-transparent rounded-md",onClick:()=>{l.onDelete(t.getValue())},children:e.jsx(J,{className:"w-6 h-4 text-red-600 border-3 border-white"})})]}),header:()=>"Action"}],[l]);export{we as default};
