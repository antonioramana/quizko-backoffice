import{r as s,W as F,j as e,Y as k}from"./app--oISFhqW.js";import{A as R}from"./AuthenticatedLayout-DSVi8vY8.js";import{D as V}from"./Datagrid-C_u-I_yz.js";import{M as f}from"./Modal-CkYoBzAA.js";import g from"./Form-DjIkrRX6.js";import{D as K}from"./DeletionConfirmation-Ci_NAwrw.js";import{A as Q}from"./ActionButtons-CzZbvkZ1.js";import{g as T}from"./generateUniqueColor-Cj-zfR5N.js";import{q as E}from"./transition-D3AYu_rU.js";import"./SecondaryButton-CeOpsOwd.js";import"./ChevronRightIcon-mwYJnyBs.js";import"./PrimaryButton-D_GEZHxU.js";import"./MagnifyingGlassIcon-8S3t9k7g.js";import"./TextInput-DT_McUro.js";import"./InputLabel-Cb622Tc0.js";import"./TrashIcon-CxRs83FN.js";function te({auth:n,departments:t}){const[a,i]=s.useState(!1),[y,l]=s.useState(!1),[m,d]=s.useState(!1),[r,p]=s.useState(null),{data:j,setData:x,post:M,put:v,delete:b,processing:D,errors:S,reset:c,cancel:h,hasErrors:u,recentlySuccessful:C}=F({name:""}),A=B({onEdit:o=>{p(o),x(o),d(!0)},onDelete:o=>{p(o),l(!0)}});s.useEffect(()=>{u&&c("name"),C&&(c(),a&&i(!1),m&&d(!1))},[u,C]);const N=o=>{o.preventDefault(),M(route("departments.store"))},w=o=>{o.preventDefault(),v(route("departments.update",r.id))},q=o=>{o.preventDefault(),b(route("departments.destroy",r)),p(null),l(!1)};return e.jsxs(R,{user:n.user,children:[e.jsx(k,{title:"Département"}),e.jsx("div",{className:"",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx(V,{columns:A,rows:t,canCreate:!0,onCreate:()=>i(!0)})})}),e.jsxs(f,{show:a,title:"Ajouter une département",onClose:()=>i(!1),children:[e.jsx(E,{show:u,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-center text-red-600 dark:text-red-400",children:"Quelque chose s'est mal passé."})}),e.jsx(g,{mode:m?"edition":"creation",data:j,setData:x,errors:S,processing:D,onSubmit:m?w:N,onCancel:()=>{h(),i(!1)},onReset:()=>c("name")})]}),e.jsxs(f,{show:m,title:"Modifier une départment",onClose:()=>d(!1),children:[e.jsx(E,{show:u,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-center text-red-600 dark:text-red-400",children:"Quelque chose s'est mal passé."})}),e.jsx(g,{mode:"edition",data:j,setData:x,errors:S,processing:D,onSubmit:w,onCancel:()=>{h(),d(!1)},onReset:()=>c()})]}),e.jsx(f,{show:y,title:"Supprimer un département ",onClose:()=>l(!1),children:e.jsx(K,{name:r==null?void 0:r.name,onCancel:()=>{h(),l(!1)},handleDeleteSubmit:q})})]})}const B=n=>s.useMemo(()=>[{accessorKey:"name",cell:t=>{const a=T(t.getValue());return e.jsx("span",{className:"text-white rounded-md text-xs p-2",style:{backgroundColor:a},children:t.getValue()})},header:()=>"Départements"},{accessorKey:"recruiters",cell:t=>`${t.getValue().length}`,header:()=>"Nombre d'Enseignant"},{accessorFn:t=>t,id:"id",cell:t=>e.jsx(Q,{onEdit:n.onEdit,onDelete:n.onDelete,info:t}),header:()=>"Action"}],[n]);export{te as default};
