import{r as m,j as e}from"./app--oISFhqW.js";import{T as h,I as f}from"./TextInput-DT_McUro.js";import{I as d}from"./InputLabel-Cb622Tc0.js";import{P as j}from"./PrimaryButton-D_GEZHxU.js";import{S as w}from"./SecondaryButton-CeOpsOwd.js";import{S as k}from"./Select-BCFvR9KI.js";function _({mode:i="creation",data:r,setData:l,errors:p,processing:x,onReset:u,onSubmit:b,onCancel:g}){const[a,o]=m.useState([]);m.useEffect(()=>{if(i==="edition"&&r.answers)o(r.answers);else if(i==="creation"){const s=[{answer:"",is_correct:!1}];o(s),l(n=>({...n,answers:s}))}},[i]);const v=()=>{o([...a,{answer:"",is_correct:!1}])},y=s=>{const n=a.filter((t,c)=>c!==s);o(n),l(t=>({...t,answers:n}))},N=s=>n=>{const t=[...a];t[s].answer=n.target.value,o(t),l(c=>({...c,answers:t}))},q=s=>n=>{const t=[...a];t[s].is_correct=n.target.checked,o(t),l(c=>({...c,answers:t}))};m.useEffect(()=>()=>{u==null||u()},[]);const C=s=>{s.preventDefault();const n={...r,answers:a};b(n)};return e.jsxs("form",{className:"p-5",onSubmit:C,children:[e.jsxs("div",{className:"p-6 max-w-xl mx-auto bg-white rounded-lg shadow-md",children:[e.jsx("fieldset",{className:"gap-2",children:e.jsxs("div",{children:[e.jsx(d,{htmlFor:"question",value:"Question"}),e.jsx(h,{id:"question",name:"question",placeholder:"Question ...",value:r.question,className:"mt-1 block w-full",autoComplete:"question",isFocused:!0,onChange:s=>l("question",s.target.value),required:!0}),e.jsx(f,{message:p.question,className:"mt-2"})]})}),e.jsx("fieldset",{className:"gap-2",children:e.jsxs("div",{children:[e.jsx(d,{htmlFor:"point",value:"Point"}),e.jsx(h,{type:"number",min:0,id:"point",name:"point",placeholder:"Point ...",value:r.point,className:"mt-1 block w-full",autoComplete:"question",onChange:s=>l("point",s.target.value),required:!0}),e.jsx(f,{message:p.point,className:"mt-2"})]})}),e.jsx("fieldset",{className:"gap-2",children:e.jsxs("div",{children:[e.jsx(d,{htmlFor:"questionType",value:"Type de question"}),e.jsx(k,{id:"questionType",name:"questionType",className:"mt-1 block w-full",value:r.type,onChange:s=>l("type",s.target.value),options:[{value:"open",label:"Question ouverte"},{value:"qcm",label:"QCM"}]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-md text-black",children:"RÃ©ponses:"}),a.map((s,n)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:s.answer,onChange:N(n),className:"block w-full border-gray-300 rounded-md shadow-sm focus:border-blue-400 focus:ring focus:ring-blue-200"}),r.type==="qcm"&&e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:s.is_correct,onChange:q(n),className:"rounded border-gray-300 shadow-sm focus:border-blue-400 focus:ring focus:ring-blue-200"}),e.jsx("span",{className:"text-lg text-black",children:"Correct"})]}),n>=0&&r.type==="qcm"&&e.jsx(w,{type:"button",onClick:()=>y(n),children:"-"})]},n)),r.type==="qcm"&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(j,{type:"button",onClick:v,children:"+"})})]})]}),e.jsxs("div",{className:"flex items-center justify-end mt-4",children:[e.jsx(w,{className:"ms-4",onClick:g,disabled:x,children:"Annuler"}),e.jsx(j,{type:"submit",disabled:x,children:i==="creation"?"Ajouter":"Modifier"})]})]})}export{_ as default};
