import{r,W as F,j as e,Y as _}from"./app--oISFhqW.js";import{A as V,a as q}from"./AuthenticatedLayout-DSVi8vY8.js";import{D as K}from"./Datagrid-C_u-I_yz.js";import{M as g}from"./Modal-CkYoBzAA.js";import R from"./Form-CM59i_XF.js";import{D as $}from"./DeletionConfirmation-Ci_NAwrw.js";import{g as k}from"./generateUniqueColor-Cj-zfR5N.js";import{A as z}from"./ActionButtons-CzZbvkZ1.js";import{F as B,a as I}from"./PhoneIcon-qFTNZ_-A.js";import{q as Q}from"./transition-D3AYu_rU.js";import"./SecondaryButton-CeOpsOwd.js";import"./ChevronRightIcon-mwYJnyBs.js";import"./PrimaryButton-D_GEZHxU.js";import"./MagnifyingGlassIcon-8S3t9k7g.js";import"./TextInput-DT_McUro.js";import"./InputLabel-Cb622Tc0.js";import"./Select-BCFvR9KI.js";import"./TrashIcon-CxRs83FN.js";function ie({auth:n,recruiters:s,departments:l}){const[o,a]=r.useState(!1),[w,c]=r.useState(!1),[m,d]=r.useState(!1),[i,u]=r.useState(null),{data:D,setData:p,post:S,put:C,delete:E,processing:N,errors:v,reset:x,cancel:h,hasErrors:f,recentlySuccessful:j}=F({name:"",email:"",phone:"",address:"",jot_title:"",department_id:"",role:"recruiter",password:"",password_confirmation:""}),y=T({onEdit:t=>{u(t),p(t),d(!0)},onDelete:t=>{u(t),p(t),c(!0)}});r.useEffect(()=>{f&&x("password","password_confirmation"),j&&(x(),o&&a(!1),m&&d(!1))},[f,j]);const M=t=>{t.preventDefault(),S(route("professors.store"))},b=t=>{t.preventDefault(),C(route("professors.update",i.id))},A=t=>{t.preventDefault(),E(route("professors.destroy",i)),u(null),c(!1)};return e.jsxs(V,{user:n.user,children:[e.jsx(_,{title:"Enseignant"}),e.jsxs("div",{className:"py-12",children:[e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx(K,{columns:y,canCreate:!0,onCreate:()=>a(!0),rows:s})}),e.jsxs(g,{show:o||m,title:o?"Ajouter un enseignant":"Modifier un enseignant",onClose:()=>{a(!1),d(!1)},children:[e.jsx(Q,{show:f,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-center text-red-600 dark:text-red-400",children:"Quelque chose s'est mal passé."})}),e.jsx(R,{mode:m?"edition":"creation",data:D,setData:p,errors:v,processing:N,onSubmit:m?b:M,onCancel:()=>{h(),a(!1),d(!1)}})]}),e.jsx(g,{show:w,title:"Supprimer un enseignant ",onClose:()=>c(!1),children:e.jsx($,{name:i==null?void 0:i.user.name,onCancel:()=>{h(),c(!1)},handleDeleteSubmit:A})})]})]})}const T=n=>r.useMemo(()=>[{accessorFn:s=>s.user,id:"last_name",cell:s=>{const{email:l,phone:o,name:a}=s.getValue();return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{size:"lg",src:"",alt:a}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-[16px] font-semibold",children:a}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1 text-xs font-thin italic",children:[e.jsx(B,{className:"w-3 h-3"}),l]}),o&&e.jsxs("span",{className:"flex items-center gap-1 text-xs font-thin italic",children:[e.jsx(I,{className:"w-3 h-3"}),o]})]})]})]})},header:()=>"Enseignants"},{accessorKey:"job_title",cell:s=>`${s.getValue()}`,header:()=>"Fonction"},{accessorKey:"department.name",cell:s=>{const l=k(s.getValue());return e.jsx("span",{className:"text-white rounded-md text-xs p-2",style:{backgroundColor:l},children:s.getValue()})},header:()=>"Département"},{accessorKey:"user.address",cell:s=>`${s.getValue()}`,header:()=>"Adresse"},{accessorFn:s=>s,id:"id",cell:s=>e.jsx(z,{onEdit:n.onEdit,onDelete:n.onDelete,info:s}),header:()=>"Action"}],[n]);export{ie as default};
