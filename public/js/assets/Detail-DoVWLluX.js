var Z=Object.defineProperty;var J=(t,e,s)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var x=(t,e,s)=>(J(t,typeof e!="symbol"?e+"":e,s),s);import{r as p,R as L,j as n,W as z,Y as G,a as O}from"./app--oISFhqW.js";import{A as Q}from"./AuthenticatedLayout-DSVi8vY8.js";import{D as X}from"./Datagrid-C_u-I_yz.js";import{M as ee}from"./Modal-CkYoBzAA.js";import{P as te}from"./PrimaryButton-D_GEZHxU.js";import{S as se}from"./SecondaryButton-CeOpsOwd.js";import{C as ne}from"./Chip-BpkI-or4.js";import{F as re,a as ae}from"./XMarkIcon-CqAvwSaW.js";import"./ChevronRightIcon-mwYJnyBs.js";import"./MagnifyingGlassIcon-8S3t9k7g.js";import"./transition-D3AYu_rU.js";function oe({title:t,titleId:e,...s},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?p.createElement("title",{id:e},t):null,p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const ie=p.forwardRef(oe),ce=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),A=t=>Array.isArray(t)&&t.every(e=>typeof e=="object"&&!(e instanceof Array)),le=t=>Array.isArray(t)&&t.every(e=>Array.isArray(e)),de=t=>Array.from(t.map(e=>Object.keys(e)).reduce((e,s)=>new Set([...e,...s]),[])),ue=(t,e)=>{e=e||de(t);let s=e,r=e;A(e)&&(s=e.map(a=>a.label),r=e.map(a=>a.key));const i=t.map(a=>r.map(l=>pe(l,a)));return[s,...i]},pe=(t,e)=>{const s=t.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(r,i,a,l){const c=r[i];if(c==null)l.splice(1);else return c},e);return s===void 0?t in e?e[t]:"":s},me=t=>typeof t>"u"||t===null?"":t,P=(t,e=",",s='"')=>t.filter(r=>r).map(r=>r.map(i=>me(i)).map(i=>`${s}${i}${s}`).join(e)).join(`
`),he=(t,e,s,r)=>P(e?[e,...t]:t,s,r),fe=(t,e,s,r)=>P(ue(t,e),s,r),xe=(t,e,s,r)=>e?`${e.join(s)}
${t}`:t.replace(/"/g,'""'),$=(t,e,s,r)=>{if(A(t))return fe(t,e,s,r);if(le(t))return he(t,e,s,r);if(typeof t=="string")return xe(t,e,s);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},V=(t,e,s,r,i)=>{const a=$(t,s,r,i),l=ce()?"application/csv":"text/csv",c=new Blob([e?"\uFEFF":"",a],{type:l}),m=`data:${l};charset=utf-8,${e?"\uFEFF":""}${a}`,u=window.URL||window.webkitURL;return typeof u.createObjectURL>"u"?m:u.createObjectURL(c)};var U={exports:{}},ye="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ge=ye,be=ge;function D(){}function I(){}I.resetWarningCache=D;var je=function(){function t(r,i,a,l,c,m){if(m!==be){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:I,resetWarningCache:D};return s.PropTypes=s,s};U.exports=je();var d=U.exports;const M={data:d.oneOfType([d.string,d.array,d.func]).isRequired,headers:d.array,target:d.string,separator:d.string,filename:d.string,uFEFF:d.bool,onClick:d.func,asyncOnClick:d.bool,enclosingCharacter:d.string},B={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},ve={target:"_blank"};class T extends L.Component{constructor(e){super(e),this.state={}}buildURI(){return V(...arguments)}componentDidMount(){const{data:e,headers:s,separator:r,enclosingCharacter:i,uFEFF:a,target:l,specs:c,replace:m}=this.props;this.state.page=window.open(this.buildURI(e,a,s,r,i),l,c,m)}getWindow(){return this.state.page}render(){return null}}x(T,"defaultProps",Object.assign(B,ve)),x(T,"propTypes",M);var j;let we=(j=class extends L.Component{constructor(e){super(e),this.buildURI=this.buildURI.bind(this)}buildURI(){return V(...arguments)}handleLegacy(e,s=!1){if(window.navigator.msSaveOrOpenBlob){e.preventDefault();const{data:r,headers:i,separator:a,filename:l,enclosingCharacter:c,uFEFF:m}=this.props,u=s&&typeof r=="function"?r():r;let f=new Blob([m?"\uFEFF":"",$(u,i,a,c)]);return window.navigator.msSaveBlob(f,l),!1}}handleAsyncClick(e){const s=r=>{if(r===!1){e.preventDefault();return}this.handleLegacy(e,!0)};this.props.onClick(e,s)}handleSyncClick(e){if(this.props.onClick(e)===!1){e.preventDefault();return}this.handleLegacy(e)}handleClick(){return e=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(e):this.handleSyncClick(e);this.handleLegacy(e)}}render(){const{data:e,headers:s,separator:r,filename:i,uFEFF:a,children:l,onClick:c,asyncOnClick:m,enclosingCharacter:u,...f}=this.props,y=typeof window>"u"?"":this.buildURI(e,a,s,r,u);return n.jsx("a",{download:i,...f,ref:g=>this.link=g,target:"_self",href:y,onClick:this.handleClick(),children:l})}},x(j,"defaultProps",B),x(j,"propTypes",M),j);const Ce=we;function Ue({auth:t,candidate_answers:e,interview:s}){var N,k,R,E,F,S,_;const[r,i]=p.useState(!1),[a,l]=p.useState(null),[c,m]=p.useState(""),{data:u,setData:f,put:v,reset:y,hasErrors:g,recentlySuccessful:w}=z({note:null}),C=p.useMemo(()=>e.filter(h=>h.candidate.name.toLowerCase().includes(c.toLowerCase())||h.candidate.matricule.toLowerCase().includes(c.toLowerCase())).sort((h,b)=>h.candidate.matricule.localeCompare(b.candidate.matricule)),[e,c]),W=C.map(o=>{var h,b;return{Matricule:o.candidate.matricule,Nom:o.candidate.name,Classe:((b=(h=s[0])==null?void 0:h.post)==null?void 0:b.name)||"",Note:o.note.note!==null?o.note.note:o.note.interim_note}}),K="Résultat_"+(((N=s[0])==null?void 0:N.name)||"Interview")+".xlsx";p.useEffect(()=>{g&&y("note"),w&&(y(),r&&i(!1))},[g,w]);const q=o=>{o.preventDefault(),v(route("student_note.update",a.note)),i(!1)},H=o=>{l(o),i(!0)},Y=Ne({onView:o=>{H(o)}});return n.jsxs(Q,{user:t.user,header:n.jsxs("h2",{className:"font-semibold text-xl text-center text-gray-600 light:text-gray-200 leading-tight",children:['Réponses du test : "',(k=s[0])==null?void 0:k.name,'" , classe : "',(E=(R=s[0])==null?void 0:R.post)==null?void 0:E.name,'"']}),children:[n.jsx(G,{title:"Résultats"}),n.jsx(O,{href:"/results",className:"inline-flex items-center justify-center rounded-md bg-purple-950 py-2 px-5 text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-10",children:"Retour"}),n.jsxs("div",{className:"flex items-center justify-center text-center font-bold my-2 text-purple-950 text-2xl leading-tight",children:["Résultat du test : ",(F=s[0])==null?void 0:F.name,"-",(_=(S=s[0])==null?void 0:S.post)==null?void 0:_.name]}),n.jsx("div",{className:"text-end",children:n.jsx(Ce,{data:W,filename:K,className:"inline-flex items-center justify-center rounded-md bg-green-800 py-2 px-5 text-center font-medium text-white hover:bg-opacity-90 lg:px-8 xl:px-10",children:"Exporter en Excel"})}),n.jsx("div",{className:"py-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[n.jsx("div",{className:"mb-2",children:n.jsx("input",{type:"text",placeholder:"Nom ou matricule ...",value:c,onChange:o=>m(o.target.value),className:"w-full text-black px-4 py-2 border border-gray-300 rounded-xl shadow-sm focus:border-blue-400 focus:ring focus:ring-blue-200 text-sm"})}),n.jsx(X,{columns:Y,rows:C,canCreate:!1})]})}),a&&n.jsxs(ee,{show:r,title:"Réponses de l'étudiant "+a.candidate.name+" :",onClose:()=>i(!1),children:[n.jsx("div",{className:"space-y-2 text-black overflow-y-auto max-h-80",children:a.answers.length>0?a.answers.map(o=>n.jsxs("div",{className:"border-b  border-gray-200 pb-4",children:[n.jsx("div",{className:"bg-black rounded-md  text-white",children:n.jsxs("h1",{className:"text-lg font-semibold",children:[o.question," (",o.question_point," point(s))"]})},o.id),o.answer_of_candidate===null?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Réponse de l'étudiant : ",o.answer," ",o.is_correct?n.jsx(re,{className:"w-4 h-4 text-green-500 inline-block align-middle"}):n.jsx(ae,{className:"w-4 h-4 text-red-500 inline-block align-middle"})]}),n.jsxs("p",{className:"text-sm",children:["Point : ",o.answer_point]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm",children:["Réponse de l'étudiant : ",o.answer_of_candidate]}),n.jsxs("p",{className:"text-sm",children:["Point : ",o.answer_point]})]})]},o.id)):n.jsx("div",{className:"text-red-500",children:"Aucune réponse.."})}),n.jsxs("form",{onSubmit:q,className:"shadow-lg p-2",children:[n.jsxs("div",{className:"flex justify-between items-center m-4",children:[n.jsxs("div",{className:"text-black",children:[" Note provisoire : ",a.note.interim_note]}),n.jsxs("div",{className:"text-black",children:[" Note : ",a.note.note===null?n.jsx("span",{className:"text-red-400",children:"En attente"}):a.note.note]}),n.jsx("div",{className:"flex items-center",children:n.jsx("input",{value:u.note,onChange:o=>{f("note",o.target.value)},type:"number",placeholder:a.note.note===null?a.note.interim_note:"Modifier la note",className:"w-50 px-3 py-1 border border-gray-300 rounded-md shadow-sm focus:border-blue-400 focus:ring focus:ring-blue-200 text-sm"})})]}),n.jsxs("div",{className:"flex items-center justify-end mt-4",children:[n.jsx(se,{className:"ms-4 text-sm",onClick:()=>i(!1),children:"Annuler"}),n.jsx(te,{className:"ms-4 text-sm",type:"submit",children:"Valider"})]})]})]})]})}const Ne=t=>p.useMemo(()=>[{accessorKey:"candidate.matricule",cell:e=>n.jsx("span",{className:"bg-purple-950 p-2 rounded-md text-white",children:e.getValue()}),header:()=>"Matricule"},{accessorKey:"candidate.name",cell:e=>`${e.getValue()}`,header:()=>"Nom"},{accessorKey:"note",cell:e=>{var s;return n.jsx("span",{className:"px-2 py-1 rounded-md bg-black text-md text-white ",children:`${(s=e.getValue())==null?void 0:s.interim_note}`})},header:()=>"Note provisoire"},{accessorKey:"note",cell:e=>{var s,r,i;return n.jsx(ne,{type:((s=e.getValue())==null?void 0:s.note)===null?"success":"error",children:((r=e.getValue())==null?void 0:r.note)===null?"En attente":`${(i=e.getValue())==null?void 0:i.note}`})},header:()=>"Note"},{accessorFn:e=>e,id:"id",cell:e=>n.jsx("div",{className:"flex space-x-2",children:n.jsx(O,{href:route("student_answers.studentTestAnswers",[e.getValue().candidate.id,e.getValue().note.interview_id]),className:" bg-orange-800 inline-flex items-center justify-center rounded-md py-2 px-2 text-center font-medium text-white hover:bg-opacity-90 lg:px-2 xl:px-3",children:n.jsx(ie,{className:"w-5 h-5"})})}),header:()=>"Action"}],[t]);export{Ue as default};
