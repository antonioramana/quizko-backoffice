import{r,W as R,j as e,Y as k,a as q}from"./app--oISFhqW.js";import{A as $}from"./AuthenticatedLayout-DSVi8vY8.js";import{D as A}from"./Datagrid-C_u-I_yz.js";import{M as f}from"./Modal-CkYoBzAA.js";import S from"./Form-D_QpiLJ6.js";import{D as K}from"./DeletionConfirmation-Ci_NAwrw.js";import{g as Q}from"./generateUniqueColor-Cj-zfR5N.js";import{F as T,a as I,b as U}from"./TrashIcon-79Z-s5Od.js";import{q as v}from"./transition-D3AYu_rU.js";import"./SecondaryButton-CeOpsOwd.js";import"./ChevronRightIcon-mwYJnyBs.js";import"./PrimaryButton-D_GEZHxU.js";import"./MagnifyingGlassIcon-8S3t9k7g.js";import"./TextInput-DT_McUro.js";import"./InputLabel-Cb622Tc0.js";function re({auth:o,posts:t}){const[n,l]=r.useState(!1),[D,i]=r.useState(!1),[d,c]=r.useState(!1),[a,x]=r.useState(null),{data:j,setData:h,post:N,put:y,delete:M,processing:b,errors:w,reset:u,cancel:p,hasErrors:m,recentlySuccessful:C}=R({name:"",description:""}),E=W({onEdit:s=>{x(s),h(s),c(!0)},onDelete:s=>{x(s),i(!0)}});r.useEffect(()=>{m&&u("name","description"),C&&(u(),n&&l(!1),d&&c(!1))},[m,C]);const F=s=>{s.preventDefault(),N(route("levels.store"))},g=s=>{s.preventDefault(),y(route("levels.update",a.id))},V=s=>{s.preventDefault(),M(route("levels.destroy",a)),x(null),i(!1)};return console.log(t),e.jsxs($,{user:o.user,children:[e.jsx(k,{title:"Classes"}),e.jsx("div",{className:"",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx(A,{columns:E,rows:t,canCreate:!0,onCreate:()=>l(!0)})})}),e.jsxs(f,{show:n,title:"Ajouter une classe",onClose:()=>l(!1),children:[e.jsx(v,{show:m,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-center text-red-600 dark:text-red-400",children:"Quelque chose s'est mal passé."})}),e.jsx(S,{mode:d?"editon":"creation",data:j,setData:h,errors:w,processing:b,onSubmit:d?g:F,onCancel:()=>{p(),l(!1)},onReset:()=>u("name")})]}),e.jsxs(f,{show:d,title:"Modifier une Classe",onClose:()=>c(!1),children:[e.jsx(v,{show:m,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-center text-red-600 dark:text-red-400",children:"Quelque chose s'est mal passé."})}),e.jsx(S,{mode:"edition",data:j,setData:h,errors:w,processing:b,onSubmit:g,onCancel:()=>{p(),c(!1)},onReset:()=>u()})]}),e.jsx(f,{show:D,title:"Supprimer un un niveau ",onClose:()=>i(!1),children:e.jsx(K,{name:a==null?void 0:a.name,onCancel:()=>{p(),i(!1)},handleDeleteSubmit:V})})]})}const W=o=>r.useMemo(()=>[{accessorKey:"name",cell:t=>{const n=Q(t.getValue());return e.jsx("span",{className:"text-white rounded-md text-xs p-2",style:{backgroundColor:n},children:t.getValue()})},header:()=>"Nom"},{accessorKey:"candidates",cell:t=>`${t.getValue().length}`,header:()=>"Nombre des étudiants"},{accessorKey:"description",cell:t=>`${t.getValue()}`,header:()=>"Description"},{accessorFn:t=>t,id:"id",cell:t=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(q,{href:`/levels/${t.getValue().id}`,className:"p-1 border border-transparent rounded-md",children:e.jsx(T,{className:"w-6 h-4 text-gray-500 border-3 border-white"})}),e.jsx("button",{className:"p-1 border border-transparent rounded-md",onClick:()=>{o.onEdit(t.getValue())},children:e.jsx(I,{className:"w-6 h-4 text-purple-950 border-3 border-white"})}),e.jsx("button",{className:"p-1 border border-transparent rounded-md",onClick:()=>{o.onDelete(t.getValue())},children:e.jsx(U,{className:"w-6 h-4 text-red-600 border-3 border-white"})})]}),header:()=>"Action"}],[o]);export{re as default};
